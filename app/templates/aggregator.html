{% extends "base.html" %}
{% block content %}

    <div class="row">
        <div class="col-sm-6">
            <h3 style="color: #009900">Network summary</h3>
            <h4 style="color: #116644;">Nodes</h4>
            <p>
                There are <b><span class="n_all_active_nodes">n_all_active</span></b> active nodes and
                <b><span class="n_up_nodes">n_up_nodes</span></b> are up.
            </p>
        </div>
        <div class="col-sm-6">
            <h3 style="color: #009900">Weather <a href="http://www.arso.gov.si/" target="_blank">(ARSO)</a></h3>

            <div class="row">
                <div class="col-sm-3 text-center">
                    <img src="{{ weather_1.clouds }}" alt="Clear skye">
                </div>
                <div class="col-sm-3 text-center">
                    Temperature<br>
                    <b>{{ weather_1.temperature | float | round(2) }} °C</b>
                </div>
                <div class="col-sm-3 text-center">
                    Humidity<br>
                    <b>{{ weather_1.humidity | float | round(2) }} %</b>
                </div>
                <div class="col-sm-3 text-center">
                    Rain level*<br>
                    <b><span class="rain_level">test</span></b>
                    <b>(<span class="rain_mmph">test3,2</span> mm/h)</b>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3 text-center">
                    Wind direction<br>
                    <img src="{{ weather_1.wind_direction }}">
                </div>
                <div class="col-sm-3 text-center">
                    Wind speed<br>
                    <b>{{ weather_1.wind_speed | float | round(2) }} km/h</b>
                </div>
                <div class="col-sm-3 text-center">
                    Wind gusts speed<br>
                    <b>{{ weather_1.wind_gust_speed | float | round(2) }} km/h</b>
                </div>
                <div class="col-sm-3 text-center">
                    Sun radiance<br>
                    <b>{{ weather_1.sun_radiation | float | round(2) }} W/m2</b>
                </div>
            </div>
            <br>

            <p>
                <img class="img-rounded img-responsive"
                     src="http://www.arso.gov.si/vreme/napovedi%20in%20podatki/radar_anim.gif"><br>
                <br>*Radar info update on: <span class="radar_updated_text">test3</span><br>
                Weather info updated on: {{ weather_1.valid }} <br>
                Information for observation station LJUBLJANA_BEŽIGRAD (46.065580, 14.512464)<br>
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6">

        </div>
        <div class="col-sm-6">

        </div>
    </div>

<script type="text/javascript">
$(document).ready(function() {
    var lat = 46.08492521;
    var lon = 14.47540596;
    $.getJSON('http://opendata.si/vreme/report/?lat='+ lat +'&lon='+ lon, function (jdata) {
        $('p.test_c').text(jdata.copyright);
{#        var a = new Date(jdata.forecast.updated*1000);#}
{#        $('p.test_c2').text(a);#}
        $('span.rain_level').text(jdata.radar.rain_level);
        $('span.radar_updated_text').text(jdata.radar.updated_text);
        $('span.rain_mmph').text(jdata.radar.rain_mmph);
        $('span.location').text('lat: ' + lat.toString() + ' lon: ' + lon.toString())


    });

    $.getJSON('/api/network_summary', function (jdata) {
        $('span.n_all_nodes').text(jdata.network.n_all_nodes);
        $('span.n_all_active_nodes').text(jdata.network.n_all_active_nodes);
        $('span.n_up_nodes').text(jdata.network.n_all_up_nodes);


    });
});



</script>

{% endblock %}