{% extends "base.html" %}
{% block content %}

    <div class="row">
        <div class="col-sm-6">
            <h3 style="color: #009900">Network summary</h3>
            <h4 style="color: #116644;">Nodes</h4>
            <p>
                There are <b><span class="n_all_active_nodes">n_all_active</span></b> active nodes and
                <b><span class="n_up_nodes">n_up_nodes</span></b> are up.
            </p>
        </div>
        <div class="col-sm-6">
            <h3 style="color: #009900">Weather</h3>
            <p>
                <b>Information for locaion:</b> <span class="location"><i>location</i></span><br>
                <br>
                <b>Radar info update on:</b> <span class="radar_updated_text">test3</span><br>
                <b>Rain level:</b> <span class="rain_level">test</span><br>
                <b>Rain:</b> <span class="rain_mmph">test2</span> mm/h<br>
            </p>
            <p>
                <img class="img-rounded img-responsive"
                     src="http://www.arso.gov.si/vreme/napovedi%20in%20podatki/radar_anim.gif">
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6">

        </div>
        <div class="col-sm-6">

        </div>
    </div>

<script type="text/javascript">
$(document).ready(function() {
    var lat = 46.08492521;
    var lon = 14.47540596;
    $.getJSON('http://opendata.si/vreme/report/?lat='+ lat +'&lon='+ lon, function (jdata) {
        $('p.test_c').text(jdata.copyright);
{#        var a = new Date(jdata.forecast.updated*1000);#}
{#        $('p.test_c2').text(a);#}
        $('span.rain_level').text(jdata.radar.rain_level);
        $('span.radar_updated_text').text(jdata.radar.updated_text);
        $('span.rain_mmph').text(jdata.radar.rain_mmph);
        $('span.location').text('lat: ' + lat.toString() + ' lon: ' + lon.toString())


    });

    $.getJSON('/api/network_summary', function (jdata) {
        $('span.n_all_nodes').text(jdata.network.n_all_nodes);
        $('span.n_all_active_nodes').text(jdata.network.n_all_active_nodes);
        $('span.n_up_nodes').text(jdata.network.n_all_up_nodes);


    });
});



</script>

{% endblock %}